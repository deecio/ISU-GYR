<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" />
    <link rel="stylesheet" type="text/css" href="css/style.css?v=1.2">
    <link rel="stylesheet" type="text/css" href="css/materialize.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Bungee|Roboto" rel="stylesheet">
    <script type="text/javascript" charset="utf-8" src="js/jquery-3.1.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/jquery-ui.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/gyr.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/fabric.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/materialize.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/angular.min.js"></script>
    <link href="css/baseV4.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.css" media="all" rel="stylesheet">
    <link href="http://yandex.st/highlightjs/8.0/styles/tomorrow.min.css" media="all" rel="stylesheet">
    <title>Interactive Apartment</title>
</head>

<body class="responsive wd-p-Responsive wd-show-sidebar wd-p-ShowSidebar">
    <div class="wd-l-Header hwrapper" id="header">
        <div class="wd-l-Header-inner">
            <div class="wd-l-TopStrip isu-dark-ribbon" id="top-strip">
                <div class="wd-l-TopStrip-inner">
                    <ul class="wd-ResponsiveToggles">
                        <li>
                            <button class="wd-ResponsiveToggles-nav">menu</button>
                        </li>
                        <li>
                            <button class="wd-ResponsiveToggles-search">search</button>
                        </li>
                    </ul>
                    <div class="wd-l-TopStripMenu">
                        <ul class="wd-l-TopStripMenu-group wd-l-TopStripMenu-group--signons first">
                            <li> <a class="wd-l-TopStripMenu-header" href="javascript:;">Sign-ons <i class="fa fa-angle-down"></i></a>
                                <ul class="wd-l-TopStripMenu-toolbar">
                                    <li class="first"><a href="http://cymail.iastate.edu/">CyMail</a></li>
                                    <li><a href="http://outlook.iastate.edu/">Outlook</a></li>
                                    <li><a href="http://bb.its.iastate.edu/">Blackboard</a></li>
                                    <li class="last"><a href="http://accessplus.iastate.edu/">AccessPlus</a></li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="wd-l-TopStripMenu-group wd-l-TopStripMenu-group--directory last">
                            <li> <a class="wd-l-TopStripMenu-header" href="javascript:;">More <i class="fa fa-angle-down"></i></a>
                                <ul class="wd-l-TopStripMenu-toolbar">
                                    <li class="first"><a href="http://info.iastate.edu/">Directory</a></li>
                                    <li><a href="http://www.fpm.iastate.edu/maps/">Maps</a></li>
                                    <li class="last"><a href="http://www.iastate.edu/contact/">Contact Us</a></li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="wd-l-TopStripMenu-group wd-l-TopStripMenu-group--index">
                            <li> <a class="wd-l-TopStripMenu-header" href="http://www.iastate.edu/index/A">Index</a>
                                <ul class="wd-l-TopStripMenu-toolbar">
                                    <li class="first"><a href="http://www.iastate.edu/index/A/">A</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/B/">B</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/C/">C</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/D/">D</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/E/">E</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/F/">F</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/G/">G</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/H/">H</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/I/">I</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/J/">J</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/K/">K</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/L/">L</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/M/">M</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/N/">N</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/O/">O</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/P/">P</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/Q/">Q</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/R/">R</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/S/">S</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/T/">T</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/U/">U</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/V/">V</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/W/">W</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/X/">X</a></li>
                                    <li class=""><a href="http://www.iastate.edu/index/Y/">Y</a></li>
                                    <li class="last"><a href="http://www.iastate.edu/index/Z/">Z</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="wd-l-Ribbon isu-red-ribbon" id="ribbon" role="banner">
                <div class="wd-l-Ribbon-inner">
                    <form action="//google.iastate.edu/search" class="wd-l-SearchBox isu-search-form" method="GET" role="search">
                        <input name="output" type="hidden" value="xml_no_dtd" />
                        <input name="client" type="hidden" value="default_frontend" />
                        <input name="proxystylesheet" type="hidden" value="default_frontend" />
                        <input accesskey="s" name="q" title="Search" placeholder="Search" tabindex="1" type="text" />
                        <input name="btnG" title="Submit" type="submit" value="Search" /> </form>
                    <a accesskey="1" class="wd-Nameplate nameplate" href="http://www.iastate.edu/"> <img alt="Iowa State University" src="img/sprite.png" /> </a>
                    <div class="wd-l-MastTitle-siteTitle site-title sub-title"> <a href="/">Office of Sustainability</a> </div>
                </div>
            </div>
            <div class="wd-l-Navbar">
                <div class="wd-l-Navbar-inner">
                    <div role="navigation">
                        <ul class="wd-Navigation">
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link" href="../index.html">Home</a> </li>
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link is-active" href="#">Interactive Apartment</a> </li>
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link" href="../ShoppingCartPage/ShoppingCart.html">Savings Cart</a> </li>
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link" href="../information.html">Information</a> </li>
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link" href="../results.php">Quiz Results</a> </li>
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link" href="../results.php">Green Living Quiz Results</a> </li>
                            <li class="wd-Navigation-node"> <a class="wd-Navigation-link" href="../FactPage.html">Green Living Facts</a> </li>
                        </ul>
                    </div>
                    <select class="wd-Navigation-alt navigation-alternative" onchange="window.location=this.value" title="Navigation">
                        <option value="index.html">Home</option>
                        <option value="gyr.html" selected="selected">Interactive Apartment</option>
                        <option value="savingscart.html">Savings Cart</option>
                        <option value="information.html">Information</option>
                        <option value="results.php">Quiz Results</option>
                        <option value="FactPage.html">Trivia</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-8" id="fullcontent">
        <header>
            <center>
                <h1>
            <p><img src="img/title.PNG" style="height:200px;"></p>
            </h1> </center>
        </header>
        <center>
            <p id="intro" style="font-size: 150%">
                <Strong>Design your own virtual living space and learn how the items you’re bringing into your <span style='color:red'>Iowa State</span> home can make a sustainable difference!</Strong> </p>
        </center>
        <center>
            <div class="card-panel white"> <span class="black-text">
                    <p style="font-size: 120%"><Strong>Instructions</Strong></p>
              <ol type="1">
                    <li>Select your residence hall layout.</li>
                    &emsp;
                    <li>Drag and drop items from the different categories into the layout to design your space.</li>
                    &emsp;
                    <li>Hover over items in the layout to learn sustainable tips and tricks.</li>
                </ol>
          </span> </div>
        </center>
        <div id="importantbody">
            <div>
                <select class='dropdown-button btn'>
                    <option value="" disabled selected>CHOOSE YOUR ROOM!</option>
                    <option value="1">FRILEY</option>
                    <option value="2">MWL</option>
                    <option value="3">BUCHANAN</option>
                </select>
            </div>
            <!--<div>
            <a class='dropdown-button btn' data-beloworigin="true" href='#' data-activates='dropdown1'>Pick your dorm room!</a>
            <ul id='dropdown1' class='dropdown-content'>
                <li><a href="#!" value="Maple">Maple</a></li>
                <li class="divider"></li>
                <li><a href="#!" value="Willow">Willow</a></li>
                <li class="divider"></li>
                <li><a href="#!" value="Larch">Larch</a></li>
                <li class="divider"></li>
                <li><a href="#!" value="Frederiksen Court">Frederiksen Court</a></li>
                <li class="divider"></li>
                <li><a href="#!" value="University Village">University Village</a></li>
                <li class="divider"></li>
                <li><a href="#!" value="Legacy">Legacy</a></li>
            </ul>
        </div>
-->
            <!--<div class="layer">
    <div class="room">
        <div id="canvas-container">
            <canvas id="c" width="600" height="600"></canvas>
        </div>
    </div>
</div>-->
            <div>
                <div id="canvas-container" style="float:left;">
                    <canvas id="c"></canvas>
                </div>
                <div class="draggable-menu-wrapper">
                    <div id="images">
                        <ul class="collapsible" data-collapsible="accordion">
                            <li>
                                <div class="collapsible-header active" id="basics"><i class="material-icons">label</i>Basics</div>
                                <div class="collapsible-body">
                                    <img class="item-thumbnail" id="bdesk" src="img/Basics/BasicsStudentDeskBig.png" />
                                    <img class="item-thumbnail" id="sdesk" src="img/Basics/Student%20Desk%20.png" />
                                    <img class="item-thumbnail" id="nightstand" src="img/Basics/BrownNightstand.png" />
                                    <img class="item-thumbnail" id="nightstand" src="img/Basics/WhiteNightstand.png" />
                                    <img class="item-thumbnail" id="bunkbed" src="img/Basics/BunkBed.png" />
                                    <img class="item-thumbnail" id="queenbed" src="img/Basics/QueenBed.png" />
                                    <img class="item-thumbnail" id="twinbed" src="img/Basics/Twin%20Bed%20White.png" />
                                    <img class="item-thumbnail" id="chair" src="img/Basics/SittingChair.png" />
                                    <img class="item-thumbnail" id="chair" src="img/Basics/WorkChair.png" />
                                    <img class="item-thumbnail" id="couch" src="img/Basics/ISU%20Couch%203.png" />
                                    <img class="item-thumbnail" id="lazyboy" src="img/Basics/ISU%20LazyBoy.png" />
                                    <img class="item-thumbnail" id="sofa" src="img/Basics/ISU%20Sofa.png" />
                                    <img class="item-thumbnail" id="bwardrobe" src="img/Basics/Wardrobe%20big.png" />
                                    <img class="item-thumbnail" id="swardrobe" src="img/Basics/Wardrobe.png" />
                                </div>
                            </li>
                            <li>
                                <div class="collapsible-header" id="electronics"><i class="material-icons">label</i>Electronics</div>
                                <div class="collapsible-body">
                                    <img class="item-thumbnail" id="iphone" src="img/Electronics/iphone.jpeg" />
                                    <img class="item-thumbnail" id="comp" src="img/Electronics/PC.png" />
                                    <img class="item-thumbnail" id="pwr_strip" src="img/Electronics/PowerStrip.png" />
                                    <img class="item-thumbnail" id="smart_pwr" src="img/Electronics/Smart%20Power%20Strip.png" />
                                    <img class="item-thumbnail" id="printer" src="img/Electronics/Printer%20Black.png" />
                                    <img class="item-thumbnail" id="game" src="img/Electronics/Wii.png" />
                                    <img class="item-thumbnail" id="game" src="img/Electronics/XBOX.png" />
                                    <img class="item-thumbnail" id="tv" src="img/Electronics/TV%20Entertainment%20System.png" />
                                    <img class="item-thumbnail" id="tv" src="img/Electronics/TV%20Streaming.png" />
                                    <img class="item-thumbnail" id="stereo" src="img/Electronics/Stereo%20System.png" />
                                </div>
                            </li>
                            <li>
                                <div class="collapsible-header" id="decor"><i class="material-icons">label</i>Decor</div>
                                <div class="collapsible-body">
                                    <img class="item-thumbnail" id="bicycle" src="img/Decor/bicycle.png" />
                                    <img class="item-thumbnail" id="blanket" src="img/Decor/Blankets.png" />
                                    <img class="item-thumbnail" id="ceilingfan" src="img/Decor/Ceiling%20Fan.jpg" />
                                    <img class="item-thumbnail" id="decorflower" src="img/Decor/DecorFlower.png" />
                                    <img class="item-thumbnail" id="decorplanter" src="img/Decor/DecorPlanter.png" />
                                    <img class="item-thumbnail" id="drape" src="img/Decor/Drapes.png" />
                                    <img class="item-thumbnail" id="car" src="img/Decor/ISUCar.png" />
                                </div>
                            </li>
                            <li>
                                <div class="collapsible-header" id="lighting"><i class="material-icons">label</i>Lightings</div>
                                <div class="collapsible-body">
                                    <img class="item-thumbnail" id="lighting" src="img/Lighting/Floor%20Lamp%20White.png" />
                                    <img class="item-thumbnail" id="lighting" src="img/Lighting/Table%20Lamp%20Black.png" />
                                    <img class="item-thumbnail" id="lighting" src="img/Lighting/Table%20Lamp%20White.jpg" />
                                    <img class="item-thumbnail" id="lighting" src="img/Lighting/Table%20Lamp%20White%202.png" />
                                </div>
                            </li>
                            <li>
                                <div class="collapsible-header" id="kitchen"><i class="material-icons">label</i>Kitchen</div>
                                <div class="collapsible-body">
                                    <img class="item-thumbnail" id="dinnerware" src="img/Appliances/Dinnerware.png" />
                                    <img class="item-thumbnail" id="fridge" src="img/Appliances/Micro%20Fridge%20Black.png" />
                                    <img class="item-thumbnail" id="toaster" src="img/Appliances/Toaster%20.png" />
                                    <img class="item-thumbnail" id="utensils" src="img/Appliances/Utensils.png" />
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var grid = 50;
        var c = $("#c");
        var ctx = c[0].getContext('2d');
        ctx.canvas.height = 700;
        ctx.canvas.width = 700;
        var canvas = new fabric.Canvas('c', {
            selection: false
        });
        var width = 0;
        var height = 0;

        $('.dropdown-button').on('change', function () {
            console.log($(this));
            canvas.clear();
            if ($(".dropdown-button").val() == "1") {
                width = 10 * 50;
                height = 12 * 50;
                for (var i = 0; i < 11; i++) {
                    if (i == 0 || i == 10) {
                        canvas.add(new fabric.Line([i * grid, 0, i * grid, 600], {
                            stroke: '#7BA643',
                            strokeWidth: 10,
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    } else {
                        canvas.add(new fabric.Line([i * grid, 0, i * grid, 600], {
                            stroke: 'black',
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    }
                }
                for (var i = 0; i < 13; i++) {
                    if (i == 0 || i == 12) {
                        canvas.add(new fabric.Line([0, i * grid, 500, i * grid], {
                            stroke: '#7BA643',
                            strokeWidth: 10,
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    } else {
                        canvas.add(new fabric.Line([0, i * grid, 500, i * grid], {
                            stroke: 'black',
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    }
                }
            } else if ($(".dropdown-button").val() == "2") {
                width = 11 * 50;
                height = 11 * 50;
                for (var i = 0; i < 12; i++) {
                    if (i == 0 || i == 11) {
                        canvas.add(new fabric.Line([i * grid, 0, i * grid, 550], {
                            stroke: '#7BA643',
                            strokeWidth: 10,
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    } else {
                        canvas.add(new fabric.Line([i * grid, 0, i * grid, 550], {
                            stroke: 'black',
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    }
                }
                for (var i = 0; i < 12; i++) {
                    if (i == 0 || i == 11) {
                        canvas.add(new fabric.Line([0, i * grid, 550, i * grid], {
                            stroke: '#7BA643',
                            strokeWidth: 10,
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    } else {
                        canvas.add(new fabric.Line([0, i * grid, 550, i * grid], {
                            stroke: 'black',
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    }
                }
            } else if ($(".dropdown-button").val() == "3") {
                width = 12 * 50;
                height = 12 * 50;
                for (var i = 0; i < 13; i++) {
                    if (i == 0 || i == 12) {
                        canvas.add(new fabric.Line([i * grid, 0, i * grid, 600], {
                            stroke: '#7BA643',
                            strokeWidth: 10,
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    } else {
                        canvas.add(new fabric.Line([i * grid, 0, i * grid, 600], {
                            stroke: 'black',
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    }
                }
                for (var i = 0; i < 13; i++) {
                    if (i == 0 || i == 12) {
                        canvas.add(new fabric.Line([0, i * grid, 600, i * grid], {
                            stroke: '#7BA643',
                            strokeWidth: 10,
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    } else {
                        canvas.add(new fabric.Line([0, i * grid, 600, i * grid], {
                            stroke: 'black',
                            selectable: false,
                            hasControls: false,
                            hoverCursor: 'default'
                        }));
                    }
                }
            }
            canvas.renderAll();
        });

        /*   for (var i = 0; i < width; i++) {
               if (i == 0 || i == 12) {
                   canvas.add(new fabric.Line([i * grid, 0, i * grid, 500], {
                       stroke: '#7BA643',
                       strokeWidth: 10,
                       selectable: false,
                       hasControls: false,
                       hoverCursor: 'default'
                   }));
               } else {
                   canvas.add(new fabric.Line([i * grid, 0, i * grid, 500], {
                       stroke: 'black',
                       selectable: false,
                       hasControls: false,
                       hoverCursor: 'default'
                   }));
               }
           }
           for (var i = 0; i < 11; i++) {
               if (i == 0 || i == 10) {
                   canvas.add(new fabric.Line([0, i * grid, 600, i * grid], {
                       stroke: '#7BA643',
                       strokeWidth: 10,
                       selectable: false,
                       hasControls: false,
                       hoverCursor: 'default'
                   }));
               } else {
                   canvas.add(new fabric.Line([0, i * grid, 600, i * grid], {
                       stroke: 'black',
                       selectable: false,
                       hasControls: false,
                       hoverCursor: 'default'
                   }));
               }
           }*/
        canvas.on('mouse:over', function (e) {
            if (e.target != canvas.getActiveObject()) {
                showTooltip(e.target);
            }
            /*            var objs = canvas.getObjects();
                        for (var i = objs.length; i > 0; i--) {
                            if (e.target == objs[i]) {
                                showTooltip(e.target);
                            }
                        }*/
        });
        canvas.on('mouse:out', function (e) {
            $('.tooltiptext').remove();
            $('#theimg').remove();
        });
        canvas.on('object:moving', function (e) {
            var obj = e.target;
            obj.set({
                left: Math.round(obj.left / grid) * grid,
                top: Math.round(obj.top / grid) * grid
            });
            obj.setCoords();
            if (obj.getBoundingRect().top < 0 || obj.getBoundingRect().left < 0) {
                obj.top = Math.max(obj.top, obj.top - obj.getBoundingRect().top);
                obj.left = Math.max(obj.left, obj.left - obj.getBoundingRect().left);
            }
            if (obj.getBoundingRect().top + obj.getBoundingRect().height > height || obj.getBoundingRect().left + obj.getBoundingRect().width > width) {
                obj.top = Math.min(obj.top, height - obj.getBoundingRect().height + obj.top - obj.getBoundingRect().top);
                obj.left = Math.min(obj.left, width - obj.getBoundingRect().width + obj.left - obj.getBoundingRect().left);
            }
        });
        var angles = [90, 180, 270, 360];
        canvas.on("object:rotating", function (rotEvtData) {
            var targetObj = rotEvtData.target;
            var angle = targetObj.angle % 360;
            for (var i = 0; i < angles.length; i++) {
                if (angle <= angles[i]) {
                    targetObj.angle = angles[i];
                    break;
                }
            }
        });

        function showTooltip(e) {
            $('.tooltiptext').remove();
            $('#theimg').remove();
            var x = Math.floor(Math.random() * 10);
            if (e.name == "printer") {
                $('body').append("<img id='theimg' src='img/Tips/printer.png' />");
            } else if (e.name == "comp") {
                $('body').append("<img id='theimg' src='img/Tips/pc.png' />");
            } else if (e.name == "game") {
                $('body').append("<img id='theimg' src='img/Tips/xbox.png' />");
            } else if (e.name == "smart_pwr") {
                $('body').append("<img id='theimg' src='img/Tips/smartpowerstrip.png' />");
            } else if (e.name == "tv") {
                $('body').append("<img id='theimg' src='img/Tips/tv.png' />");
            } else if (e.name == "pwr_strip") {
                $('body').append("<img id='theimg' src='img/Tips/powerstrip.png' />");
            } else if (e.name == "iphone") {
                $('body').append("<img id='theimg' src='img/Tips/iphone.png' />");
            } else if (e.name == "utensils") {
                $('body').append("<img id='theimg' src='img/Tips/utensils.png' />");
            } else if (e.name == "dinnerware") {
                $('body').append("<img id='theimg' src='img/Tips/dinnerware.png' />");
            } else if (e.name == "fridge") {
                $('body').append("<img id='theimg' src='img/Tips/microfridge.png' />");
            } else if (e.name == "toaster") {
                $('body').append("<img id='theimg' src='img/Tips/toaster.png' />");
            } else if (e.name == "lighting") {
                $('body').append("<img id='theimg' src='img/Tips/tablelamp.png' />");
            } else if (e.name == "car") {
                $('body').append("<img id='theimg' src='img/Tips/car.png' />");
            } else if (e.name == "blanket") {
                $('body').append("<img id='theimg' src='img/Tips/blanket.png' />");
            } else if (e.name == "bicycle") {
                $('body').append("<img id='theimg' src='img/Tips/bike.png' />");
            } else if (e.name == "decorplanter") {
                $('body').append("<img id='theimg' src='img/Tips/planter.png' />");
            } else if (e.name == "decorflower") {
                $('body').append("<img id='theimg' src='img/Tips/flowerplant.png' />");
            } else if (e.name == "ceilingfan") {
                $('body').append("<img id='theimg' src='img/Tips/fan.png' />");
            } else if (e.name == "drape") {
                $('body').append("<img id='theimg' src='img/Tips/drapes.png' />");
            }
            /* if (e.name == "printer") {
                 $("body").append("<a class='tooltiptext'> American spends 2 - 4 hours per month paying bills when they write and mail paper checks.Put your pen down and sign up for paperless billing today!");
             } else if (e.name == "comp") {
                 $("body").append("<a class='tooltiptext'>Screen savers don’t save energy. Rather, the purpose of a screen saver is to protect your screen from one single image remaining imprinted upon it.Make sure to turn your computer and / or laptop off when you are done.");
             } else if (e.name == "game") {
                 $("body").append("<a class='tooltiptext'>If you’re like the average male college student, you probably own a gaming console. Did you know that gaming consoles consume nearly as much power when they are left idle as they do when you are playing them? Remember to turn off your console when you’re not using it.");
             } else if (e.name == "smart_pwr") {
                 $("body").append("<a class='tooltiptext'>Televisions, DVD players, and other electronic equipment can use nearly as much energy when left on standby as when they’re in use. To avoid wasting energy, unplug equipment when you’re not using it. To make things as easy as possible, plug multiple devices into a power strip, which you can switch on and off at once.");
             } else if (e.name == "tv") {
                 $("body").append("<a class='tooltiptext'>Consider buying rechargeable batteries, and recycling them when you are done with them. Non-rechargeable batteries are tough to recycle and often end up in landfills. In addition, try not to throw batteries in the garbage; instead, find out where they can be recycled.");
             } else if (e.name == "pwr_strip") {
                 $("body").append("<a class='tooltiptext'>Televisions, DVD players, and other electronic equipment can use nearly as much energy when left on standby as when they’re in use. To avoid wasting energy, unplug equipment when you’re not using it. To make things as easy as possible, plug multiple devices into a power strip, which you can switch on and off at once.");
             } else if (e.name == "iphone") {
                 $("body").append("<a class='tooltiptext'>Cellphone companies are forever encouraging us to switch to the newest, most fashionable handset, sometimes long before the existing one is defunct. However, cellphones contain a cocktail of toxic substances that shouldn’t be discarded in landfills. Recycling keeps these undesirable elements out of the waste stream and saves the mining and manufacturing impacts of producing new handsets. Consider donating your old phone to charity for recycling when you do need a new one.");
             } else if (e.name == "utensils") {
                 $("body").append("<a class='tooltiptext'>Eliminate plastic bags, plastic utensils, disposable containers, paper napkins,and those brown paper bags by choosing a reusable lunchbox, reusable drink containers, cloth napkins, and silverware.");
             } else if (e.name == "dinnerware") {
                 $("body").append("<a class='tooltiptext'>If done properly, washing dishes by hand tends to be more energy-efficient than using a dishwasher, especially for small volumes of dishes. Instead of washing under a running faucet, put a plug in the sink, or use a large, plastic bowl. And to minimize the amount of water used when rinsing, install a lowflow aerator on your kitchen sink faucets. When washing dishes by hand, minimize the number of times you need to change the water by washing the least-dirty items first.");
             } else if (e.name == "fridge") {
                 $("body").append("<a class='tooltiptext'>Keep your fridge tidy so that you can find what you’re looking for quickly. Up to 30% of the cold air held within the fridge escapes each time you open thedoor, so the quicker you grab and close the door, the better.");
             } else if (e.name == "toaster") {
                 $("body").append("<a class='tooltiptext'>Try out these kitchen-friendly tips to increase energy-efficiency: <br>Cook with small appliances. <br>Avoid pre-heating your oven unless it is a short baking job. <br>Use the oven more when it is cold outside");
             } else if (e.name == "lighting") {
                 $("body").append("<a class='tooltiptext'>An easy way to increase energy savings is to use fluorescent bulbs when possible. Make sure you are using the correct wattage, and keep your lightbulbs clean (dirt absorbs light)! Did you know: If everyone in Ames replaced five incandescent bulbs with CFLs, 40 million pounds of CO2 could be eliminated from the atmosphere!");
             };*/
            changeTooltipPosition(e);
        }

        function changeTooltipPosition(e) {
            var rect = e.getBoundingRect();
            var offset = canvas.calcOffset();
            var bottom = offset._offset.top + rect.top + rect.height;
            var right = offset._offset.left + rect.left + rect.width;
            var left = offset._offset.left + rect.left + 90;
            var top = offset._offset.top + rect.top - 120;
            $('.tooltiptext').css({
                top: top,
                left: left
            });
            $('#theimg').css({
                top: top,
                left: left
            });
        }

        function handleDragStart(e) {
    [].forEach.call(images, function (img) {
                img.classList.remove('img_dragging');
            });
            this.classList.add('img_dragging');
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'copy';
            return false;
        }

        function handleDragEnter(e) {
            this.classList.add('over');
        }

        function handleDragLeave(e) {
            this.classList.remove('over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            var mouse = canvas.getPointer(e.e);
            var posx = mouse.x;
            var posy = mouse.y;
            var img = document.querySelector('#images img.img_dragging');
            if (img.id == "bdesk") {
                var bdesk = new Image();
                bdesk.src = "img/Basics/BasicsDeskBig.png";
                var newImage = new fabric.Image(bdesk, {
                    name: img.id,
                    width: 200,
                    height: 200,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "sdesk") {
                var sdesk = new Image();
                sdesk.src = "img/Basics/BasicsDeskSmall.png";
                var newImage = new fabric.Image(sdesk, {
                    name: img.id,
                    width: 150,
                    height: 150,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "nightstand") {
                var nightstand = new Image();
                nightstand.src = "img/Basics/BasicsNightstand.png";
                var newImage = new fabric.Image(nightstand, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "queenbed") {
                var queenbed = new Image();
                queenbed.src = "img/Basics/BasicsQueenBed.png";
                var newImage = new fabric.Image(queenbed, {
                    name: img.id,
                    width: 200,
                    height: 200,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "twinbed") {
                var twinbed = new Image();
                twinbed.src = "img/Basics/BasicsTwinBed.png";
                var newImage = new fabric.Image(twinbed, {
                    name: img.id,
                    width: 150,
                    height: 150,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "bunkbed") {
                var object = new Image();
                object.src = "img/Basics/BasicsBunkBed.png";
                var newImage = new fabric.Image(object, {
                    name: img.id,
                    width: 150,
                    height: 150,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "chair") {
                var chair = new Image();
                chair.src = "img/Basics/BasicsChair.png";
                var newImage = new fabric.Image(chair, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "couch") {
                var topdown = new Image();
                topdown.src = "img/Basics/3SeaterSofa.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 200,
                    height: 300,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "sofa") {
                var topdown = new Image();
                topdown.src = "img/Basics/3SeaterSofa.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 200,
                    height: 300,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "lazyboy") {
                var topdown = new Image();
                topdown.src = "img/Basics/LazyBoy.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 200,
                    height: 300,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "bwardrobe") {
                var topdown = new Image();
                topdown.src = "img/Basics/BasicsWardrobeBig.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 200,
                    height: 300,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "swardrobe") {
                var topdown = new Image();
                topdown.src = "img/Basics/BasicsWardrobe.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 150,
                    height: 200,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "iphone") {
                var iphone = new Image();
                iphone.src = "img/Electronics/iphone-top.png";
                var newImage = new fabric.Image(iphone, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "comp") {
                var topdown = new Image();
                topdown.src = "img/Electronics/PC-top.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 100,
                    height: 100,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "pwr_strip") {
                var topdown = new Image();
                topdown.src = "img/Electronics/PowerStrip-top.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "smart_pwr") {
                var topdown = new Image();
                topdown.src = "img/Electronics/SmartPlug.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "printer") {
                var topdown = new Image();
                topdown.src = "img/Electronics/Printer%20Black.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 100,
                    height: 100,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "game") {
                var topdown = new Image();
                topdown.src = "img/Electronics/xbox-top.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 100,
                    height: 100,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "tv") {
                var topdown = new Image();
                topdown.src = "img/Electronics/FlatScreenTV.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 150,
                    height: 150,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "stereo") {
                var topdown = new Image();
                topdown.src = "img/Electronics/Stereo.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "lighting") {
                var topdown = new Image();
                topdown.src = "img/Lighting/TableLamp.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "dinnerware") {
                var topdown = new Image();
                topdown.src = "img/Appliances/dinner-top.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "fridge") {
                var topdown = new Image();
                topdown.src = "img/Appliances/minifridge.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "toaster") {
                var topdown = new Image();
                topdown.src = "img/Appliances/Toaster-top.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "utensils") {
                var topdown = new Image();
                topdown.src = "img/Appliances/Utensils-top.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "bicycle") {
                var topdown = new Image();
                topdown.src = "img/Decor/helmet.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "blanket") {
                var topdown = new Image();
                topdown.src = "img/Decor/topblanket.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "decorflower") {
                var topdown = new Image();
                topdown.src = "img/Decor/topflower.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "decorplanter") {
                var topdown = new Image();
                topdown.src = "img/Decor/topplant.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "car") {
                var topdown = new Image();
                topdown.src = "img/Decor/carkey.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "ceilingfan") {
                var topdown = new Image();
                topdown.src = "img/Decor/CeilingFanTopView.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            } else if (img.id == "drape") {
                var topdown = new Image();
                topdown.src = "img/Decor/Drapes.png";
                var newImage = new fabric.Image(topdown, {
                    name: img.id,
                    width: 50,
                    height: 50,
                    left: posx - 50,
                    top: posy - 30,
                    hasControls: true,
                    hasBorders: true
                });
            }



            canvas.add(newImage);
            //canvas.bringToFront(newImage);
            /*newImage.toObject = function () {
                return {
                    type: img.id,
                    src: img.src
                };
            };*/
            console.log(JSON.stringify(newImage));
            /*var stringJson = JSON.stringify(this.canvas);
            var objectJson = JSON.parse(stringJson);

            stringJson = JSON.stringify(objectJson);

            $http.post('http://serverurl/', stringJson);*/
            return false;
        }

        function handleDragEnd(e) {
    [].forEach.call(images, function (img) {
                img.classList.remove('img_dragging');
            });
        }
        var images = document.querySelectorAll('#images img');
    [].forEach.call(images, function (img) {
            img.addEventListener('dragstart', handleDragStart, false);
            img.addEventListener('dragend', handleDragEnd, false);
        });
        var canvasContainer = document.getElementById('canvas-container');
        canvasContainer.addEventListener('dragenter', handleDragEnter, false);
        canvasContainer.addEventListener('dragover', handleDragOver, false);
        canvasContainer.addEventListener('dragleave', handleDragLeave, false);
        canvasContainer.addEventListener('drop', handleDrop, false);
        canvas.on('object:selected', function (e) {
            $('.tooltiptext').remove();
            $('#theimg').remove();
            jQuery(".deleteBtn").remove();
            var btnLeft = e.target.oCoords.mt.x;
            var btnTop = e.target.oCoords.mt.y - 25;
            var widthadjust = e.target.width / 2;
            btnLeft = widthadjust + btnLeft - 10;
            var deleteBtn = '<p" class="deleteBtn" title="Remove" style="position:absolute;top:' + btnTop + 'px;left:' + btnLeft + 'px;cursor:pointer;" title="Remove object">&#10005;</p>';
            jQuery(".canvas-container").append(deleteBtn);
        });
        canvas.on('mouse:down', function (e) {
            if (canvas.getActiveObject()) {} else {
                jQuery(".deleteBtn").remove();
            }
        });
        canvas.on('object:modified', function (e) {
            jQuery(".deleteBtn").remove();
            var btnLeft = e.target.oCoords.mt.x;
            var btnTop = e.target.oCoords.mt.y - 25;
            var widthadjust = e.target.width / 2;
            btnLeft = widthadjust + btnLeft - 10;
            var deleteBtn = '<p" class="deleteBtn" title="Remove" style="position:absolute;top:' + btnTop + 'px;left:' + btnLeft + 'px;cursor:pointer;" title="Remove object">&#10005;</p>';
            jQuery(".canvas-container").append(deleteBtn);
        });
        canvas.on('object:moving', function (e) {
            jQuery(".deleteBtn").remove();
        });
        jQuery(document).on('click', ".deleteBtn", function () {
            if (canvas.getActiveObject()) {
                canvas.remove(canvas.getActiveObject());
                jQuery(this).remove();
                jQuery(".deleteBtn").remove();
            }
        });
    </script>
    <div class="wd-l-Footer">
        <div class="wd-l-Footer-inner">
            <div class="GLimage"> <img src="img/footer.png" /> </div>
            <div class="wd-l-PageFooter" id="footer" role="contentinfo">
                <div class="wd-l-PageFooter-inner">
                    <div class="wd-Grid wd-Grid--fitToFill wd-Grid--noGutter">
                        <div class="wd-Grid-cell wd-Grid-cell--1">
                            <div class="wd-l-PageFooter-nameplate">
                                <a class="wd-Nameplate" href="http://www.iastate.edu/"> <img alt="Iowa State University" src="img/sprite.png"> </a>
                            </div>
                        </div>
                        <div class="wd-Grid-cell wd-Grid-cell--2">
                            <div class="wd-l-PageFooter-content">
                                <div class="region region-footer">
                                    <div id="block-block-1" class="block block-block">
                                        <div class="content">
                                            <p>Copyright © 1995-2016, Iowa State University of Science and Technology. All rights reserved.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>